;Tue Dec 20 20:52:17 2022

call : InitGlobalVars

;Setting Stack Frame
push 0
pop rbx

call : main

hlt

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		: main

; 'ded' - local var init
; assigment
push 100
push 500
ja : true_0
push 0
jmp :true_end_0
: true_0
push 100
: true_end_0
pop  [ 2 + rbx ] ; local var 'ded'

; 'tes' - local var init
; assigment
push 314
sin
pop  [ 3 + rbx ] ; local var 'tes'

FIN
; BBBBBBBBBBBBBBBBBBBBBB
pop  [ 2 + rbx ] ; local var 'ded'
push  [ 2 + rbx ] ; local var 'ded'
FOUT
;Setting parametrs for call
push  [ 2 + rbx ] ; local var 'ded'
pop  [ 4 + rbx ]; 0 - param pos, 4 - stack frame offset

; Setting Stack Frame
push 4 + rbx
pop rbx

call :fucktorial

; Setting Stack Frame Back
push 4
push rbx
sub

pop rbx

;AAAAAAAAAAAAAAAAA
push rcx
FOUT

; return ;
push 0

pop rcx ;ret reg
ret

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		: fucktorial

; instruction
; condition for if_0
push 0
push  [ 0 + rbx ] ; local var 'number'
jb : true_1
push 0
jmp :true_end_1
: true_1
push 100
: true_end_1
push 0
push  [ 0 + rbx ] ; local var 'number'
ja : true_2
push 0
jmp :true_end_2
: true_2
push 100
: true_end_2
FMUL

push 0
je : if_end_label_0
; end of condition

; if body

; return ;
push 100

pop rcx ;ret reg
ret

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
: if_end_label_0

; 'temp' - local var init
; assigment
push  [ 0 + rbx ] ; local var 'number'
pop  [ 1 + rbx ] ; local var 'temp'

push 0
push  [ 0 + rbx ] ; local var 'number'
jb : true_3
push 0
jmp :true_end_3
: true_3
push 100
: true_end_3
push 0
push  [ 0 + rbx ] ; local var 'number'
ja : true_4
push 0
jmp :true_end_4
: true_4
push 100
: true_end_4
ADD
FOUT

; return ;
;Setting parametrs for call
push 100
push  [ 0 + rbx ] ; local var 'number'
SUB
pop  [ 2 + rbx ]; 0 - param pos, 2 - stack frame offset

; Setting Stack Frame
push 2 + rbx
pop rbx

call :fucktorial

; Setting Stack Frame Back
push 2
push rbx
sub

pop rbx

;AAAAAAAAAAAAAAAAA
push rcx
push  [ 1 + rbx ] ; local var 'temp'
FMUL

pop rcx ;ret reg
ret

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		: InitGlobalVars

ret

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;end {document}
